// Generated by CoffeeScript 1.6.2
(function() {
  var fs, readFile, readFileLines, _isLocked;

  fs = require("fs");

  _isLocked = void 0;

  readFile = function(path) {
    if (!fs.existsSync(path)) {
      fs.writeFileSync(path, "", "utf8");
    }
    return fs.readFileSync(path, "utf8");
  };

  readFileLines = function(path) {
    if (!fs.existsSync(path)) {
      fs.writeFileSync(path, "", "utf8");
    }
    return fs.readFileSync(path, "utf8").split('\r\n');
  };

  exports.lock = function(name) {
    var f;

    if (_isLocked) {
      return true;
    }
    f = readFileLines(".crawler-skip-initial").filter(function(f) {
      return f === name;
    })[0];
    if (!f) {
      fs.appendFileSync(".crawler-skip-initial", name + "\r\n");
    }
    _isLocked = true;
    if (f) {
      return true;
    } else {
      return false;
    }
  };

  exports.unlock = function(name) {
    var f;

    if (!_isLocked) {
      return false;
    }
    f = readFileLines(".crawler-skip-initial").filter(function(f) {
      return f !== name;
    });
    return fs.writeFileSync(".crawler-skip-initial", f.join("\r\n"));
  };

}).call(this);

/*
//@ sourceMappingURL=skip-initial-state.map
*/
